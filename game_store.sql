-- assingment 1-3

DROP TABLE IF EXISTS stores CASCADE;
DROP TABLE IF EXISTS employees;
DROP TABLE IF EXISTS games;
DROP TABLE IF EXISTS figures;
DROP TABLE IF EXISTS posts;




CREATE TABLE stores(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY
);
INSERT INTO stores(id) VALUES (1);

CREATE TABLE employees(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    employee_name VARCHAR CHECK(employee_name ~'^[A-Z][a-z]*(\s[A-Z][a-z]*)*$'),
    position VARCHAR
    CHECK(position ~ '^(Sales Associate|Store Manager|Inventory Clerk|Customer Service Representative|IT Specialist|Marketing Coordinator|Assistant Manager|Finance Analyst|Security Officer|HR Coordinator)$'),
    salary FLOAT -- CHECK(salary > 16.66 AND salary < 31.26)
    -- store_id INT, FOREIGN kEY(store_id) REFERENCES stores(id)
);
\COPY employees FROM 'employee.csv' DELIMITER ',' CSV HEADER;
SELECT setval('employees_id_seq',(SELECT MAX(id) FROM employees));

-- INSERT INTO employees(id,store_id,full_name) VALUES (1,1,'Kenny Welcome');




CREATE TABLE games(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    -- store_id INT, FOREIGN KEY(store_id) REFERENCES stores(id),
    game_title VARCHAR,
    quantity INT,
    price FLOAT
);
\COPY games FROM 'game.csv' DELIMITER ',' CSV HEADER;
SELECT setval('games_id_seq',(SELECT MAX(id) FROM games));




CREATE TABLE figures(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    -- store_id INT, FOREIGN KEY(store_id) REFERENCES stores(id),
    action_figure_title VARCHAR CHECK (action_figure_title ~'^([A-Z][a-zA-Z0-9-]*|\d+)(\s([A-Z][a-zA-Z0-9-]*|\d+))*$'),
    quantity INT CHECK(quantity > 0 AND quantity < 31),
    price FLOAT CHECK(price > 9.99 AND price < 100.01)
);
\COPY figures FROM 'action_figure.csv' DELIMITER ',' CSV HEADER;
SELECT setval('figures_id_seq',(SELECT MAX(id) FROM figures));
-- INSERT INTO figures(id,store_id,name_figure,quantity) VALUES (1,1,'GOKU',25);



CREATE TABLE posts(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    poster_title VARCHAR UNIQUE CHECK(poster_title ~ '^([A-Z][a-zA-Z0-9-]*)(\s[A-Z][a-zA-Z0-9-]*)*\s?[0-9]*$'),
    -- store_id INT, FOREIGN KEY(store_id) REFERENCES stores(id),
    quantity INT CHECK(quantity > 0 AND quantity < 31),
    price FLOAT CHECK(price > 5.99 AND price < 20.01)
);
\COPY posts FROM 'poster.csv' DELIMITER ',' CSV HEADER;
SELECT setval('posts_id_seq',(SELECT MAX(id) FROM posts));
-- INSERT INTO posts(poster_title,quantity,price) VALUES ('GOKU',25,14.99);



